(()=>{var t,e={279:()=>{function t(t,a){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return e(t,a);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,a):void 0}}(t))||a&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){s=!0,c=t},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw c}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}$((function(){"use strict";var e={tooltips:{callbacks:{label:function(t,e){return e.datasets[t.datasetIndex].data[t.index].toLocaleString("en-US",{style:"currency",currency:"UGX"})}}},datalabels:{display:!0,anchor:"end",align:"top",color:"#333",font:{weight:"bold"},formatter:function(t){return"UGX ".concat(t.toLocaleString())}},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(t,e,a){return t.toLocaleString()}}}]},legend:{display:!0,position:"bottom",onClick:function(){alert("hello")}},elements:{point:{radius:4,hitRadius:7,pointStyle:"circle"}}};if($("#cashFlowChart").length){var a=$("#cashFlowChart").get(0).getContext("2d");new Chart(a,{type:"line",data:{labels:cashFlowChartLabels,datasets:[{label:"Cash Inflows",data:cashFlowRevenueChartData,borderColor:"rgb(136,211,202)",backgroundColor:"rgb(136,211,202)",fill:!1,tension:.1},{label:"Cash Outflows",data:cashFlowExpenseChartData,borderColor:"rgb(226,161,153)",backgroundColor:"rgb(226,161,153)",fill:!1,tension:.1}]},options:e})}if($("#cashBalanceChart").length){var n=$("#cashBalanceChart").get(0).getContext("2d");new Chart(n,{type:"bar",data:{labels:cashBalanceChartLabels,datasets:[{label:"Cash Balance",data:cashBalanceChartData,backgroundColor:["rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(231, 233, 237, 0.2)","rgba(255, 159, 64, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(75, 192, 192, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(231, 233, 237, 1)","rgba(255, 159, 64, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]},options:e})}if($("#expenseByCategoryChart").length){var r=$("#expenseByCategoryChart").get(0).getContext("2d");new Chart(r,{type:"bar",data:{labels:expenseByCategoryChartLabels,datasets:[{label:"Cash Balance",data:expenseByCategoryChartData,backgroundColor:["rgba(75, 192, 192, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(231, 233, 237, 1)","rgba(255, 159, 64, 1)","rgba(75, 192, 192, 1)"],borderColor:["rgba(75, 192, 192, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(231, 233, 237, 1)","rgba(255, 159, 64, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]},options:e})}if($("#budgetVsActualExpenseChart").length){var o=$("#budgetVsActualExpenseChart").get(0).getContext("2d");new Chart(o,{type:"bar",data:{labels:budgetVsActualExpenseChartLabels,datasets:[{label:"Cash Balance",data:budgetVsActualExpenseChartData,backgroundColor:["rgba(75, 192, 192, 1)","rgb(250, 96, 114)"],borderColor:["rgba(75, 192, 192, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},options:e})}$("#itemsTable").length&&i("#itemList-0"),$("#itemsTable").on("input",".item-input",(function(){var t,e=$(this).val(),a=$(this).closest(".item-row"),n=(t=e,s.find((function(e){return e.name===t})));n&&(a.find('input[name$="[quantity]"]').val(n.default_quantity||1),a.find('input[name$="[unit_price]"]').val(n.price))}));var c=1;function l(e){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="",o=t(e);try{for(o.s();!(a=o.n()).done;){var c=a.value;r+='<option value="'.concat(c.id,'">').concat(n).concat(c.name,"</option>"),c.children&&c.children.length>0&&(r+=l(c.children,n+"-- "))}}catch(t){o.e(t)}finally{o.f()}return r}$("#addItem").on("click",(function(){var t=l(revenueAccounts),e='\n        <tr class="item-row">\n            <td>\n                <input list="itemList-'.concat(c,'" name="items[').concat(c,'][name]" placeholder="Type or Select Item" class="form-control item-input">\n                <datalist id="itemList-').concat(c,'">\n                    \x3c!-- Options will be populated dynamically --\x3e\n                </datalist>\n            </td>\n            <td>\n                <textarea name="items[').concat(c,'][description]" placeholder="description" class="form-control"></textarea>\n            </td>\n            <td>\n                <select name="items[').concat(c,'][account_id]" class="form-control">\n                    ').concat(t,'\n                </select>\n            </td>\n            <td>\n                <input type="text" name="items[').concat(c,'][quantity]" placeholder="Quantity" class="form-control">\n            </td>\n            <td>\n                <input type="text" name="items[').concat(c,'][unit_price]" data-bs-type="currency" placeholder="Unit Price" class="form-control">\n            </td>\n            <td>\n                <button type="button" class="btn btn-danger remove-item">Remove</button>\n            </td>\n        </tr>\n    ');$("#itemsTable").append(e),i("#itemList-".concat(c)),c++}));var s=[];function i(t){var e=$('meta[name="base-url"]').attr("content");$.ajax({url:e+"/accounting/products",method:"GET",success:function(e){s=e,$(t).empty(),$.each(e,(function(e,a){$(t).append('<option value="'+a.name+'">')}))},error:function(){alert("Failed to load products.")}})}$(document).on("click",".remove-item",(function(){$(this).closest("tr").remove()})),$("#invoiceForm").on("submit",(function(t){t.preventDefault();var e=$(this).serialize();$.ajax({url:$(this).attr("action"),type:"POST",data:e,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){t.success?(alert("Invoice created successfully!"),window.location.href="/accounting/invoices"):alert("Something went wrong: "+t.message)},error:function(t){var e=t.responseJSON.errors;for(var a in e)alert(e[a]);alert("Error code: "+t.status)}})})),$("#recentExensesOffcanvasID").on("show.bs.offcanvas",(function(){var t=$(this).attr("data-url"),e=$(this).find(".offcanvas-body");e.html('<p class="text-center p-3">Loading expenses...</p>'),$.ajax({url:t,method:"GET",dataType:"json",success:function(t){e.empty(),0!==t.length?$.each(t,(function(t,a){var n=a.expense_category?a.expense_category.name:"Unknown",r=new Intl.NumberFormat("en-UG",{style:"currency",currency:a.currency}).format(a.amount),o="1"===a.paid?'<span class="badge bg-success">Paid</span>':'<span class="badge bg-warning">Pending</span>',c='\n                        <div class="card m-2 shadow-sm">\n                            <div class="card-body row">\n                                <div class="col-lg-12 text-capitalize">\n                                    <h5 class="mb-1 text-primary">'.concat(n,'</h5>\n\n                                </div>\n                                <div class="col-lg-6"><small class="text-muted">Ref: ').concat(a.reference,'</small></div>\n                                <div class="col-lg-6 text-end"><small class="text-muted">Date: ').concat(a.expense_date,'</small></div>\n                                <div class="col-lg-6">\n                                    <strong>').concat(r,'</strong>\n                                </div>\n                                <div class="col-lg-6 text-end">\n                                    ').concat(o,"\n                                </div>\n                            </div>\n                        </div>\n                    ");e.append(c)})):e.html('<p class="text-center p-3">No recent expenses found.</p>')},error:function(){e.html('<p class="text-center text-danger p-3">Failed to load expenses. Try again.</p>')}})})),$(document).on("shown.bs.offcanvas",".offcanvas",(function(){var t=$(this).find(".select-expense-category");if(!t.data("loaded")){var e=t.data("url");e&&$.ajax({url:e,type:"GET",dataType:"json",success:function(e){var n=a(e);t.append(n),t.data("loaded",!0)},error:function(){alert("Failed to load categories")}})}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";return t.forEach((function(t){var r;n+='<option value="'.concat(t.id,'">').concat(e).concat(t.name,"</option>"),null!==(r=t.children)&&void 0!==r&&r.length&&(n+=a(t.children,e+"—"))})),n}})),$(document).on("shown.bs.offcanvas",".offcanvas",(function(){var t=$(this).find(".select-revenue-category");if(!t.data("loaded")){var e=t.data("url");e&&$.ajax({url:e,type:"GET",dataType:"json",success:function(e){var n=a(e);t.append(n),t.data("loaded",!0)},error:function(){alert("Failed to load categories")}})}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";return t.forEach((function(t){var r;n+='<option value="'.concat(t.id,'">').concat(e).concat(t.name,"</option>"),null!==(r=t.children)&&void 0!==r&&r.length&&(n+=a(t.children,e+"—"))})),n}}))}))},440:()=>{}},a={};function n(t){var r=a[t];if(void 0!==r)return r.exports;var o=a[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,a,r,o)=>{if(!a){var c=1/0;for(d=0;d<t.length;d++){for(var[a,r,o]=t[d],l=!0,s=0;s<a.length;s++)(!1&o||c>=o)&&Object.keys(n.O).every((t=>n.O[t](a[s])))?a.splice(s--,1):(l=!1,o<c&&(c=o));if(l){t.splice(d--,1);var i=r();void 0!==i&&(e=i)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[a,r,o]},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={405:0,212:0};n.O.j=e=>0===t[e];var e=(e,a)=>{var r,o,[c,l,s]=a,i=0;if(c.some((e=>0!==t[e]))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var d=s(n)}for(e&&e(a);i<c.length;i++)o=c[i],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(d)},a=self.webpackChunk=self.webpackChunk||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})(),n.O(void 0,[212],(()=>n(279)));var r=n.O(void 0,[212],(()=>n(440)));r=n.O(r)})();